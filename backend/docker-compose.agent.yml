version: '3.8'

services:
  climate-agent:
    build:
      context: .
      dockerfile: Dockerfile.agent
    container_name: climate-conflict-agent
    restart: unless-stopped
    volumes:
      - ./data:/app/data
      - ./agent_memory:/app/agent_memory
      - ./climate_agent_advanced.db:/app/climate_agent_advanced.db
    environment:
      - FIRECRAWL_API_KEY=fc-a0b3b8aa31244c10b0f15b4f2d570ac7
      - ANALYSIS_INTERVAL=1800
    ports:
      - "8000:8000"
    
  agent-dashboard:
    build:
      context: .
      dockerfile: Dockerfile.agent
    container_name: climate-agent-dashboard
    restart: unless-stopped
    volumes:
      - ./climate_agent_advanced.db:/app/climate_agent_advanced.db
    ports:
      - "8001:8000"
    command: ["python", "agent_dashboard.py"]
